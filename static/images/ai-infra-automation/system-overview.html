<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>System Architecture</title>
<style>
  body {
    margin: 0;
    padding: 20px;
    background: #ffffff;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }
  svg {
    display: block;
  }
</style>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="620" viewBox="0 0 900 620">
  <defs>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="1" dy="2" stdDeviation="3" flood-color="#00000018"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666666"/>
    </marker>
    <style>
      .box-label { font-size: 11px; font-weight: 600; fill: #555555; letter-spacing: 0.5px; }
      .item-text { font-size: 13px; fill: #333333; font-weight: 500; }
      .item-sub { font-size: 11px; fill: #777777; }
      .arrow-line { stroke: #888888; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
    </style>
  </defs>

  <!-- ==================== TOP ROW: 트리거 ==================== -->
  <g filter="url(#shadow)">
    <rect x="220" y="20" width="460" height="90" rx="10" ry="10" fill="#e8f4fd" stroke="#4a90d9" stroke-width="1.5"/>
  </g>
  <text x="232" y="42" class="box-label" fill="#4a90d9">트리거</text>
  <!-- 스케줄러 -->
  <rect x="240" y="52" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#4a90d9" stroke-width="1" opacity="0.7"/>
  <text x="340" y="77" class="item-text" text-anchor="middle">스케줄러 APScheduler</text>
  <!-- Slack 이벤트 -->
  <rect x="460" y="52" width="200" height="40" rx="6" ry="6" fill="#ffffff" stroke="#4a90d9" stroke-width="1" opacity="0.7"/>
  <text x="560" y="77" class="item-text" text-anchor="middle">Slack 이벤트 Socket Mode</text>

  <!-- ==================== LEFT COLUMN ==================== -->

  <!-- MCP 서버 -->
  <g filter="url(#shadow)">
    <rect x="20" y="180" width="180" height="190" rx="10" ry="10" fill="#ede8fd" stroke="#7a6dd9" stroke-width="1.5"/>
  </g>
  <text x="32" y="202" class="box-label" fill="#7a6dd9">MCP 서버</text>
  <rect x="40" y="212" width="140" height="34" rx="6" ry="6" fill="#ffffff" stroke="#7a6dd9" stroke-width="1" opacity="0.7"/>
  <text x="110" y="234" class="item-text" text-anchor="middle">Slack</text>
  <rect x="40" y="256" width="140" height="34" rx="6" ry="6" fill="#ffffff" stroke="#7a6dd9" stroke-width="1" opacity="0.7"/>
  <text x="110" y="278" class="item-text" text-anchor="middle">Jira</text>
  <rect x="40" y="300" width="140" height="34" rx="6" ry="6" fill="#ffffff" stroke="#7a6dd9" stroke-width="1" opacity="0.7"/>
  <text x="110" y="322" class="item-text" text-anchor="middle">Datadog</text>

  <!-- 명령어 실행 -->
  <g filter="url(#shadow)">
    <rect x="20" y="400" width="180" height="150" rx="10" ry="10" fill="#e8f0fd" stroke="#4a6dd9" stroke-width="1.5"/>
  </g>
  <text x="32" y="422" class="box-label" fill="#4a6dd9">명령어 실행</text>
  <rect x="40" y="432" width="140" height="34" rx="6" ry="6" fill="#ffffff" stroke="#4a6dd9" stroke-width="1" opacity="0.7"/>
  <text x="110" y="454" class="item-text" text-anchor="middle">AWS CLI</text>
  <rect x="40" y="478" width="140" height="34" rx="6" ry="6" fill="#ffffff" stroke="#4a6dd9" stroke-width="1" opacity="0.7"/>
  <text x="110" y="500" class="item-text" text-anchor="middle">로컬 명령어</text>

  <!-- ==================== RIGHT COLUMN: 코어 ==================== -->
  <g filter="url(#shadow)">
    <rect x="230" y="150" width="650" height="440" rx="12" ry="12" fill="#e8f8e8" stroke="#5ba85b" stroke-width="1.5"/>
  </g>
  <text x="244" y="174" class="box-label" fill="#5ba85b">코어</text>

  <!-- Python 전처리 (top-left inside 코어) -->
  <rect x="260" y="190" width="250" height="50" rx="8" ry="8" fill="#ffffff" stroke="#5ba85b" stroke-width="1" filter="url(#shadow)"/>
  <text x="385" y="212" class="item-text" text-anchor="middle">Python 전처리</text>
  <text x="385" y="230" class="item-sub" text-anchor="middle">API 호출 / 비용 합산</text>

  <!-- 트리아지 (top-right inside 코어) -->
  <g filter="url(#shadow)">
    <rect x="540" y="185" width="310" height="65" rx="8" ry="8" fill="#fdfde8" stroke="#c9c95b" stroke-width="1.5"/>
  </g>
  <text x="552" y="205" class="box-label" fill="#b0b04a">트리아지</text>
  <!-- 키워드 필터 inner box -->
  <rect x="555" y="212" width="110" height="28" rx="5" ry="5" fill="#ffffff" stroke="#c9c95b" stroke-width="1" opacity="0.7"/>
  <text x="610" y="231" class="item-text" text-anchor="middle" font-size="12">키워드 필터</text>
  <!-- arrow -->
  <text x="680" y="231" fill="#999999" font-size="16" text-anchor="middle">&#8594;</text>
  <!-- Haiku 3.5 분류 inner box -->
  <rect x="700" y="212" width="130" height="28" rx="5" ry="5" fill="#ffffff" stroke="#c9c95b" stroke-width="1" opacity="0.7"/>
  <text x="765" y="231" class="item-text" text-anchor="middle" font-size="12">Haiku 3.5 분류</text>

  <!-- 에이전트 (middle center) -->
  <rect x="370" y="290" width="340" height="60" rx="10" ry="10" fill="#ffffff" stroke="#5ba85b" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="540" y="316" class="item-text" text-anchor="middle" font-weight="700" font-size="14">에이전트</text>
  <text x="540" y="338" class="item-sub" text-anchor="middle">Claude Agent SDK / Opus 4.5</text>

  <!-- 저장소 (bottom-left inside 코어) -->
  <g filter="url(#shadow)">
    <rect x="260" y="400" width="250" height="110" rx="8" ry="8" fill="#f5f5f5" stroke="#999999" stroke-width="1.5"/>
  </g>
  <text x="272" y="422" class="box-label" fill="#888888">저장소</text>
  <rect x="280" y="432" width="210" height="30" rx="5" ry="5" fill="#ffffff" stroke="#999999" stroke-width="1" opacity="0.7"/>
  <text x="385" y="452" class="item-text" text-anchor="middle">실행 로그</text>
  <rect x="280" y="470" width="210" height="30" rx="5" ry="5" fill="#ffffff" stroke="#999999" stroke-width="1" opacity="0.7"/>
  <text x="385" y="490" class="item-text" text-anchor="middle">트랜스크립트</text>

  <!-- SafeBash 필터 (bottom-right inside 코어) -->
  <rect x="570" y="420" width="230" height="50" rx="8" ry="8" fill="#ffffff" stroke="#5ba85b" stroke-width="1" filter="url(#shadow)"/>
  <text x="685" y="451" class="item-text" text-anchor="middle">SafeBash 필터</text>

  <!-- ==================== ARROWS ==================== -->

  <!-- 스케줄러 → Python 전처리 -->
  <path d="M340,92 L340,130 L385,130 L385,190" class="arrow-line"/>

  <!-- Slack 이벤트 → 키워드 필터 (트리아지 안) -->
  <path d="M560,92 L560,130 L695,130 L695,185" class="arrow-line"/>

  <!-- Python 전처리 → 에이전트 -->
  <path d="M385,240 L385,265 L480,265 L480,290" class="arrow-line"/>

  <!-- Haiku 3.5 → 에이전트 -->
  <path d="M695,250 L695,270 L600,270 L600,290" class="arrow-line"/>

  <!-- 에이전트 → MCP 서버 (left) -->
  <path d="M370,310 L220,310 L220,275 L200,275" class="arrow-line"/>

  <!-- 에이전트 → SafeBash 필터 -->
  <path d="M600,350 L600,380 L685,380 L685,420" class="arrow-line"/>

  <!-- SafeBash 필터 → 명령어 실행 (left-down) -->
  <path d="M570,445 L220,445 L220,460 L200,460" class="arrow-line"/>

  <!-- 에이전트 → 저장소 -->
  <path d="M450,350 L450,380 L385,380 L385,400" class="arrow-line"/>

</svg>
</body>
</html>
